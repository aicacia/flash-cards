var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,i=(e,i)=>{for(var s in i||(i={}))t.call(i,s)&&r(e,s,i[s]);if(n)for(var s of n(i))o.call(i,s)&&r(e,s,i[s]);return e},s=(e,r)=>{var i={};for(var s in e)t.call(e,s)&&r.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&n)for(var s of n(e))r.indexOf(s)<0&&o.call(e,s)&&(i[s]=e[s]);return i};import{h as c,i as a,j as l}from"./decks-03deb0ad.js";import{T as d,D as u,a as f,i as h,L as m,d as p,E as g,A as y,c as v,b,I as E,O as L,e as _,f as N,g as w}from"./stores-0eec33c2.js";const k=new WeakMap,D=new WeakMap;var T=class{on(e,t,n){this.addEventListener(e,t,n)}off(e,t,n){this.removeEventListener(e,t,n)}addEventListener(e,t,n){(null==n?void 0:n.once)&&(t=M(this,e,t,!0)),O(this,e,!0).add(t)}removeEventListener(e,t,n){if((null==n?void 0:n.once)&&(t=M(this,e,t)),!t)return;const o=O(this,e);o&&o.delete(t)}dispatchEvent(e){let t=!0;const n=O(this,e.type);n&&n.forEach((n=>{t&&n.call(this,e),e.cancelBubble&&(t=!1)}))}};function O(e,t,n=!1){let o=k.get(e);return!o&&n&&k.set(e,o=Object.create(null)),o&&o[t]||n&&(o[t]=new Set)}function M(e,t,n,o=!1){let r=D.get(e);!r&&o&&k.set(e,r=Object.create(null));const i=r&&r[t]||o&&(r[t]=new Map);if(!i.has(n)&&o){const o=o=>{const r=O(e,t);r&&r.delete(n),n.call(e,o)};i.set(n,o)}return i&&i.get(n)}var F=Object.defineProperty({default:T},"__esModule",{value:!0}),x=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.patch=t.React=t.h=t.recycleNode=void 0;const n=[],o=new Set(["value","selected","checked","contentEditable"]),r=e=>null==e?e:e.key,s=(e,t)=>{t&&t!==e.key&&(e.key=t),!t&&e.key&&delete e.key},c=e=>{e.currentTarget.events[e.type](e)},a=(e,t,n,o,r)=>{"key"===t||("o"===t[0]&&"n"===t[1]?((e.events||(e.events={}))[t=t.slice(2)]=o)?n||e.addEventListener(t,c):e.removeEventListener(t,c):null==o?e.removeAttribute(t):!r&&"list"!==t&&"form"!==t&&t in e?e[t]=null==o?"":o:e.setAttribute(t,o))},l=(e,t)=>{if("string"==typeof e)return document.createTextNode(e);var n=e.props,o=(t=t||"svg"===e.type)?document.createElementNS("http://www.w3.org/2000/svg",e.type,{is:n.is}):document.createElement(e.type,{is:n.is});for(var i in n)a(o,i,null,n[i],t);return s(o,r(e)),e.children.forEach((e=>o.appendChild(l(h(e),t)))),o},d=(e,t)=>{const n={};for(let o=0;o<e.attributes.length;o++){const{name:r,value:i}=e.attributes[o];n[r]=r in e&&"list"!==r&&!t?e[r]:""===i||i}return n},u=(e,t,n,r,c)=>{if("string"==typeof r)null!=n&&n.nodeType===Node.TEXT_NODE?n.nodeValue!==r&&(t.nodeValue=r):(t=e.insertBefore(l(r,c),t),null!=n&&e.removeChild(n));else if(null==n||n.nodeName.toLowerCase()!==r.type)t=e.insertBefore(l(h(r),c),t),null!=n&&e.removeChild(n);else{var u=d(n,c),m=r.props;for(var p in c=c||"svg"===r.type,i(i({},u),m))(o.has(p)?t[p]:u[p])!==m[p]&&a(t,p,u[p],m[p],c);s(t,r.key),f(t,r.children,c)}return t},f=(e,t,n,o=Array.from(e.childNodes),i)=>{for(var s,c,a,d,f=0,m=0,p=o.length-1,g=t.length-1;m<=g&&f<=p&&null!=(a=r(o[f]))&&a===r(t[m]);)u(e,o[f],o[f++],t[m]=h(t[m++]),n);for(;m<=g&&f<=p&&null!=(a=r(o[p]))&&a===r(t[g]);)o[p]=u(e,o[p],o[p--],t[g]=h(t[g--]),n);if(f>p){const r=o[f]||o[f-1]&&o[f-1].nextSibling||null||i;for(;m<=g;)e.insertBefore(l(t[m]=h(t[m++]),n),r)}else if(m>g)for(;f<=p;)e.removeChild(o[f++]);else{const i=new Map,l=new Set;for(let e=f;e<=p;e++)null!=(a=r(o[e]))&&i.set(a,o[e]);for(;m<=g;)a=r(c=o[f]),d=r(t[m]=h(t[m])),l.has(a)||null!=d&&d===r(o[f+1])?(null==a&&e.removeChild(c),f++):null==d?(null==a&&(u(e,c,c,t[m],n),m++),f++):(a===d?(u(e,c,c,t[m],n),l.add(d),f++):null!=(s=i.get(d))?(u(e,e.insertBefore(s,c),s,t[m],n),l.add(d)):u(e,c,null,t[m],n),m++);for(;f<=p;)null==r(c=o[f++])&&e.removeChild(c);for(const[t,n]of i)l.has(t)||e.removeChild(n)}return e},h=e=>!0!==e&&!1!==e&&e?e:"",m=(e,t,n,o)=>({type:e,props:t,children:n,key:o});t.recycleNode=e=>e.nodeType===Node.TEXT_NODE?e.nodeValue:m(e.nodeName.toLowerCase(),d(e),n.map.call(e.childNodes,t.recycleNode),r(e));t.h=(e,t,n)=>"function"==typeof e?e(t||{},n):m(e,t||{},Array.isArray(n)?n:null==n?[]:[n],null==t?void 0:t.key),t.React={createElement:t.h};t.patch=(e,t,n,o)=>e=Array.isArray(t)?f(e,t,e instanceof window.SVGElement,n,o):u(e.parentNode,e,e,t)})),A=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Types=t.embed=t.format=t.line=t.Typeset=void 0;const n=[],o={},r={},i={},s=(e,t)=>!0;class c{constructor(e){var t,s,c;const a=null===(t=e.lines)||void 0===t?void 0:t.map((e=>"string"==typeof e?o[e]:e)).filter(Boolean),l=null===(s=e.formats)||void 0===s?void 0:s.map((e=>"string"==typeof e?r[e]:e)).filter(Boolean),d=null===(c=e.embeds)||void 0===c?void 0:c.map((e=>"string"==typeof e?i[e]:e)).filter(Boolean);this.lines=new u(a||n),this.formats=new u(l||n),this.embeds=new u(d||n)}}function a(e){return e.renderMultiple&&!e.shouldCombine&&(e.shouldCombine=s),o[e.name]=e}function l(e){return r[e.name]=e}function d(e){return i[e.name]=e}t.Typeset=c,c.line=a,c.format=l,c.embed=d,t.line=a,t.format=l,t.embed=d;class u{constructor(e){this.list=e,this.init()}get default(){return this.list[0]}init(){this.selector=this.list.map((e=>e.selector||"")).filter(Boolean).join(", "),this.types=this.list.reduce(((e,t)=>(e[t.name]=t,e)),{}),this.priorities=this.list.reduce(((e,t,n)=>(e[t.name]=n,e)),{})}add(e){this.list.push(e),this.init()}get(e){return this.types[e]}priority(e){return this.priorities[e]}matches(e){if(!e)return!1;if(!e.nodeType)throw new Error("Cannot match against "+e);return e.nodeType===Node.ELEMENT_NODE?!!this.selector&&e.matches(this.selector):void 0}findByNode(e,t=!1){if(e.nodeType!==Node.ELEMENT_NODE)return;let n=this.list.length;for(;n--;){let t=this.list[n];if(e.matches(t.selector))return t}return t?this.default:void 0}findByAttributes(e,t=!1){const n=e&&Object.keys(e);let o;return n&&n.every((e=>!(o=this.get(e)))),o||(t?this.default:void 0)}}t.Types=u})),S=c((function(e,t){
/*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   */
Object.defineProperty(t,"__esModule",{value:!0}),t.escapeHtml=void 0;const n=/["'&<>]/;t.escapeHtml=function(e){var t,o=""+e,r=n.exec(o);if(!r)return o;var i="",s=0,c=0;for(s=r.index;s<o.length;s++){switch(o.charCodeAt(s)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==s&&(i+=o.substring(c,s)),c=s+1,i+=t}return c!==s?i+o.substring(c,s):i}})),R=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createTreeWalker=void 0;const n=NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT;t.createTreeWalker=function(e,t){return(e.ownerDocument||document).createTreeWalker(e,n,{acceptNode(e){if(e.nodeType===Node.TEXT_NODE&&""===e.nodeValue)return NodeFilter.FILTER_REJECT;if(t){const n=t(e);return n?!0===n?NodeFilter.FILTER_ACCEPT:n:NodeFilter.FILTER_REJECT}return NodeFilter.FILTER_ACCEPT}})}})),P=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBRPlaceholder=void 0,t.isBRPlaceholder=function(e,t){return"BR"===t.nodeName&&function(e,t){const n=t.closest&&t.closest(e.typeset.lines.selector);if(!n)return!1;const o=R.createTreeWalker(n);return o.currentNode=t,!o.nextNode()}(e,t)}})),j=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deltaFromDom=t.cleanText=t.docFromDom=t.deltaFromHTML=t.docFromHTML=t.inlineToHTML=t.docToHTML=void 0;const o=n(d),r=n(u),i=/[\0-\x09\x0B\x1F\x7F-\x9F\xAD\u0600-\u0605\u061C\u06DD\u070F\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB\uE000-\uF8FF]/g,s={STYLE:!0,SCRIPT:!0,LINK:!0,META:!0,TITLE:!0},c={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},l=/[ \t\n\r]+/g,f=document.createElement("div"),h={};function m(e,t,n){const o=g(e,{root:(new window.DOMParser).parseFromString(t,"text/html").body,possiblePartial:n&&n.possiblePartial});return p(o),o}function p(e){e.forEach((e=>{"string"==typeof e.insert&&(e.insert=e.insert.replace(i,""))}))}function g(e,t=h){const{lines:n,embeds:o}=e.typeset,i=t.root||e.root;var c=R.createTreeWalker(i,(e=>!s[e.nodeName]));const a=new r.default;let d,u,f=!1,m=!1,p=!0;for(t.startNode?(c.currentNode=t.startNode,c.previousNode(),t.offset&&a.retain(t.offset,void 0)):c.currentNode=i;(u=c.nextNode())&&u!==t.endNode;)if(P.isBRPlaceholder(e,u))p=!1;else if("BR"===u.nodeName&&"Apple-interchange-newline"===u.className)a.insert("\n",!d||d.unknownLine?{}:d);else if(u.nodeType===Node.TEXT_NODE){let t=u.parentNode;if(null==u.nodeValue||""===u.nodeValue.replace(/\n+/g,""))continue;if(!u.nodeValue.replace(/\s+/g,"")&&(u.parentNode===i||u.previousSibling&&n.matches(u.previousSibling)||u.nextSibling&&n.matches(u.nextSibling)))continue;const o=u.nodeValue.replace(l," ").replace(/\xA0/g," ");if(!o||" "===o&&t.classList.contains("EOP"))continue;const r=v(t,i,e);p=!1,a.insert(o,r)}else if(o.matches(u)){const t=o.findByNode(u);if(t){const n=v(u.parentNode,i,e);!1!==t.fromDom&&a.insert(t.fromDom?t.fromDom(u):{[t.name]:!0},n)}}else if(n.matches(u)||u.nodeType===Node.ELEMENT_NODE&&u.matches("address, article, aside, blockquote, editor, dd, div, dl, dt, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hr, li, main, nav, noscript, ol, output, p, pre, section, table, tfoot, ul, video")){if(m=!n.matches(u),m){let e=u.parentNode;for(;e&&!n.matches(e)&&e!==i;)e=e.parentNode;if(e&&e!==i)continue}const e=n.findByNode(u,!0);if(e===n.default&&(!u.parentNode||n.matches(u.parentNode)))continue;f?d&&d.unknownLine&&p||(a.insert("\n",!d||d.unknownLine?{}:d),p=!0):f=!0,d=m?{unknownLine:m}:e&&e!==n.default?e.fromDom?e.fromDom(u):{[e.name]:!0}:{}}return m&&p||!f&&t.possiblePartial||a.insert("\n",!d||d.unknownLine?{}:d),a}function y(e){return e&&e.length?e.reduce(((e,t)=>e+("string"!=typeof t?function(e){if("string"==typeof e){f.textContent=e;const t=f.innerHTML;return f.textContent="",t}const t=Object.keys(e.props).reduce(((t,n)=>"key"===n?t:`${t} ${S.escapeHtml(n)}="${S.escapeHtml(e.props[n])}"`),""),n=y(e.children),o=n||!c[e.type]?`</${e.type}>`:"";return`<${e.type}${t}>${n}${o}`}(t):S.escapeHtml(t).replace(/\xA0/g,"&nbsp;"))),""):""}function v(e,t,n){const{lines:o,formats:r}=n.typeset,i={};for(;e&&!o.matches(e)&&e!==t;){if(r.matches(e)){const t=r.findByNode(e);t&&!1!==t.fromDom&&(i[t.name]=!t.fromDom||t.fromDom(e))}else e.hasAttribute("style")&&r.list.forEach((t=>{t.styleSelector&&e.matches(t.styleSelector)&&(i[t.name]=!t.fromDom||t.fromDom(e))}));e=e.parentNode}return i}t.docToHTML=function(e,t){return y(B.renderDoc(e,t))},t.inlineToHTML=function(e,t){return y(B.renderInline(e,t))},t.docFromHTML=function(e,t,n){return new o.default(m(e,t),n)},t.deltaFromHTML=m,t.docFromDom=function(e,t){return new o.default(g(e,{root:t}))},t.cleanText=p,t.deltaFromDom=g})),C=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.applyDecorations=t.Decorator=t.decorations=t.DecorateEvent=void 0;const o=n(u),r=n(f),c=n(h),l=/;\s*$/,d={name:"decoration",selector:"span.format.decoration",fromDom:!1,render:(e,t)=>y(x.h("span",{},t),e,["format","decoration"])},m={name:"decoration",selector:".embed.decoration",fromDom:!1,noFill:!0,render:(e,t)=>{const n="embed decoration",o=e.decoration,{name:r}=o,i=s(o,["name"]);return i.class=i.class?n+" "+i.class:n,x.h(r||"span",i,t)}};class p extends Event{constructor(e,t){super(e,t),this.old=t.old,this.doc=t.doc,this.change=t.change,this.changedLines=t.changedLines}}t.DecorateEvent=p,t.decorations=function(e){e.typeset.formats.add(d),e.typeset.embeds.add(m);const t=new Map;let n=e.doc,o=n,r=n,i=!1;function s(s){var c,a;if(!s)throw new TypeError("A decoration name is required");const l=t.get(s);if(!l)return!1;const d=v(s,l,n);return t.delete(s),r=t.size?r.apply(d):n,i||(null===(c=e.modules.rendering)||void 0===c||c.render({old:o,doc:r}),null===(a=e.modules.selection)||void 0===a||a.renderSelection()),!0}function a(){t.size&&t.clear(),r=n}function l(s,a){var l,d;const u=t.get(s),f=u?u.compose(a,!0):a;c.default(f,u)||!u&&!f.ops.length||(f.ops.length?t.set(s,f):t.delete(s),r=t.size?r.apply(a,null):n,i||(null===(l=e.modules.rendering)||void 0===l||l.render({old:o,doc:r}),null===(d=e.modules.selection)||void 0===d||d.renderSelection()))}function u(e){const{change:o,changedLines:i}=e;if(n=e.doc,o){if(o.contentChanged){for(let[e,n]of t)n=o.delta.transform(n,!0),n.ops.length?t.set(e,n):t.delete(e);r=t.size?r.apply(o.delta,null):n}}else a();f(o,i)}function f(t,r){const s={old:o,doc:n,change:t,changedLines:r};i=!0,e.dispatchEvent(new p("decorate",s)),i=!1}function h(){o=r}return e.on("change",u),e.on("render",h),{get old(){return o},get doc(){return r},getDecorator:function(n){if(!n)throw new TypeError("A decoration name is required");const o=t.get(n);return new g(n,e.doc,o,l,s)},removeDecorations:s,clearDecorations:a,gatherDecorations:f,init(){f()},destroy(){e.off("change",u),e.off("render",h)}}};class g{constructor(e,t,n,o,i){this._name=e,this._doc=t,this.change=new r.default(t),this._decoration=n,this._apply=o,this._remove=i}hasDecorations(){return!!this._decoration&&this._decoration.ops.length>0||this.change.delta.ops.length>0}getDecoration(){return this._decoration?this._decoration.compose(this.change.delta):this.change.delta}apply(){return this._apply(this._name,this.change.delta)}remove(){return this._remove(this._name)}clear(e){return this.hasDecorations()?(e?this.change.setDelta(this.change.delta.compose(this.invert(e))):this.change.setDelta(this.invert()),this):this}clearLines(e){if(!e.length)return this;const t=this._doc,n=[t.getLineRange(e[0])[0],t.getLineRange(e[e.length-1])[1]];if(1===e.length||e.every(((n,o)=>!o||t.getLineRange(e[o-1])[1]===t.getLineRange(n)[0])))return this.clear(n);const r=this.invert(n),i=new o.default;let s=0;return e.forEach((e=>{const[n,o]=t.getLineRange(e);i.retain(n-s).concat(r.slice(n,o)),s=o})),this.change.setDelta(this.change.delta.compose(i)),this}clearLine(e){const t=this._doc,n="number"==typeof e?t.getLineAt(e):"string"==typeof e?t.byId[e]:e;return this.clearLines([n])}invert(e){return this._decoration?v(this._name,this._decoration,this._doc,e):new o.default}decorateText(e,t={class:this._name}){return this.change.formatText(e,{decoration:{[this._name]:t}}),this}decorateLine(e,t={class:this._name}){return this.change.formatLine(e,{decoration:{[this._name]:t}},!0),this}insertDecoration(e,t={class:this._name}){if("string"==typeof t)throw new Error("You may only insert embed decorations");return this.change.insert(e,{decoration:t}),this}}function y(e,t,n){if(!t||!t.decoration)return e;const o=new Set(n);let r="",s=e.props;Object.values(t.decoration).forEach((e=>{e.class&&o.add(e.class),e.style&&(r+=e.style),r&&!l.test(r)&&(r+=";"),s=i(i({},e),s)}));const c=Array.from(o).join(" ").trim();return c&&s.class&&s.class,r&&(s.style=r),e.props=s,e}function v(e,t,n,r){let i=n.toDelta();return r&&(i=i.slice(r[0],r[1]),t=t.slice(r[0],r[1])),(t=t.invert(i)).ops.forEach((t=>{var n;null===(null===(n=t.attributes)||void 0===n?void 0:n.decoration)&&(t.attributes.decoration={[e]:null})})),r&&(t=(new o.default).retain(r[0]).concat(t)),t}t.Decorator=g,t.applyDecorations=y})),B=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderInline=t.getChangedRanges=t.combineLines=t.renderMultiLine=t.renderSingleLine=t.renderLine=t.renderCombined=t.renderDoc=t.fromNode=t.renderChanges=t.render=t.setLineNodesRanges=t.getLineNodeEnd=t.getLineNodeStart=void 0;const o=n(h),r=n(m),i=[],s=x.h("br",{}),c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,f=new WeakMap;function p(e){const{root:t,doc:n}=e,o=_(e,n.lines),r=new WeakMap;for(let s=0;s<t.children.length;s++){const i=t.children[s];if(!i.key)continue;const c=o.byKey[i.key];if(c)if(Array.isArray(c)){r.set(i,[n.getLineRange(c[0])[0],n.getLineRange(c[c.length-1])[1]]);const t=i.querySelectorAll(e.typeset.lines.selector);for(let e=0;e<t.length;e++){const o=t[e],i=n.byId[o.key];i&&r.set(o,n.getLineRange(i))}}else r.set(i,n.getLineRange(c))}const i=t.querySelectorAll(e.typeset.lines.selector);for(let s=0;s<i.length;s++){const e=i[s];if(r.has(e)||!e.key)continue;const t=n.byId[e.key];r.set(e,n.getLineRange(t))}f.set(t,r)}function g(e,t){const{root:n}=e;e.dispatchEvent(new Event("rendering")),x.patch(n,y(e,t)),p(e),e.dispatchEvent(new Event("render")),e.dispatchEvent(new Event("rendered"))}function y(e,t){return v(e,_(e,t.lines).combined)}function v(e,t){return t.map((t=>b(e,t))).filter(Boolean)}function b(e,t){return Array.isArray(t)?L(e,t):E(e,t)}function E(e,t){const n=D(e,t);if(!n.render)throw new Error("No render method defined for line");const o=n.render(t.attributes,w(e,t.content),e);return C.applyDecorations(o,t.attributes),o.key=t.attributes.id,o}function L(e,t){const n=D(e,t[0]);if(!n.renderMultiple)throw new Error("No render method defined for line");const o=n.renderMultiple(t.map((t=>[t.attributes,w(e,t.content)])),e);return o.key=t[0].attributes.id,o}function _(e,t){const n=u.get(t);if(n)return n;const o=[],i={};let s=[];t.forEach(((n,c)=>{const a=D(e,n);if(a.shouldCombine){s.push(n);const l=t[c+1];if(!l||D(e,l)!==a||!a.shouldCombine(n.attributes,l.attributes)){const e=d.get(s[0]);e&&e.length===s.length&&s.every(((t,n)=>e[n]===t))?s=e:d.set(s[0],s),o.push(s),i[r.default.getId(s[0])]=s,s=[]}}else a.render&&(o.push(n),i[r.default.getId(n)]=n)}));const c={combined:o,byKey:i};return u.set(t,c),c}function N(e,t){const n=e.length,o=t.length,r=Math.min(n,o);let i=0,s=0,c=0,a=0;for(let l=0;l<r;l++)if(!k(e[l],t[l])){i=c=l;break}for(let l=0;l<r;l++)if(!k(e[n-l-1],t[o-l-1])){const e=Math.max(l-1,0);s=n-e,a=o-e;break}return[[i,s],[c,a]]}function w(e,t){const{formats:n,embeds:o}=e.typeset;let r=[],a=!0;return t.ops.forEach(((t,s,l)=>{let d=[];if("string"==typeof t.insert){const e=l[s-1],n=l[s+1];let o=t.insert.replace(/  /g,"  ").replace(/  /g,"  ");e&&"object"!=typeof e.insert||(o=o.replace(/^ /," ")),n&&"object"!=typeof n.insert&&!function(e){return"string"==typeof e.insert&&" "===e.insert[0]}(n)||(o=o.replace(/ $/," ")),a=!1,d.push(o)}else if(t.insert){const n=o.findByAttributes(t.insert);(null==n?void 0:n.render)&&(d.push(n.render(t.insert,i,e)),"br"===n.name?a=!0:n.noFill||(a=!1))}t.attributes&&Object.keys(t.attributes).sort(((e,t)=>n.priority(t)-n.priority(e))).forEach((o=>{const r=n.get(o);if(null==r?void 0:r.render){const n=r.render(t.attributes,d,e);c.set(n,r),d=[n]}})),r.push.apply(r,d)})),r=T(r),a&&r.push(s),r}function k(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>e===t[n]))}function D(e,t){let n=l.get(t.attributes);return n||(n=e.typeset.lines.findByAttributes(t.attributes,!0),l.set(t.attributes,n)),n}function T(e){const t=[];if(e.forEach(((e,n)=>{let r=t[t.length-1];r&&"string"!=typeof r&&"string"!=typeof e&&c.has(r)&&c.get(r)===c.get(e)&&o.default(r.props,e.props)?r.children=r.children.concat(e.children):r&&"string"==typeof r&&"string"==typeof e?r+=e:(t.push(e),r&&"string"!=typeof r&&r.children&&(r.children=T(r.children)))})),t.length){const e=t[t.length-1];e&&"string"!=typeof e&&e.children&&(e.children=T(e.children))}return t}window.nodeRanges=f,t.getLineNodeStart=function(e,t){var n,o;return null===(o=null===(n=f.get(e))||void 0===n?void 0:n.get(t))||void 0===o?void 0:o[0]},t.getLineNodeEnd=function(e,t){var n,o;return null===(o=null===(n=f.get(e))||void 0===n?void 0:n.get(t))||void 0===o?void 0:o[1]},t.setLineNodesRanges=p,t.render=g,t.renderChanges=function(e,t,n){const{root:o}=e,r=_(e,t.lines).combined,i=_(e,n.lines).combined,[s,c]=N(r,i),a=Array.from(o.childNodes).slice(s[0],s[1]),l=i.slice(c[0],c[1]);if(!a.length&&!l.length)return g(e,n);e.dispatchEvent(new Event("rendering")),x.patch(o,v(e,l),a,a.length?void 0:o.children[s[1]]),p(e),e.dispatchEvent(new Event("render")),e.dispatchEvent(new Event("rendered"))},t.fromNode=function(e,t){const n=r.default.fromDelta(j.deltaFromDom(e,{root:t}));if(!n.length)return;return e.typeset.lines.findByAttributes(n[0].attributes,!0).renderMultiple?n:n[0]},t.renderDoc=y,t.renderCombined=v,t.renderLine=b,t.renderSingleLine=E,t.renderMultiLine=L,t.combineLines=_,t.getChangedRanges=N,t.renderInline=w})),I=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.textNodeLength=t.getNodeAndOffset=t.getNodesForRange=t.getNodeLength=t.getLineElementAt=t.getIndexFromNode=t.getIndexFromNodeAndOffset=t.getBoudingBrowserRange=t.getBrowserRange=t.getIndexFromPoint=void 0;const n=[null,0];function o(e,t){t[0]>t[1]&&(t=[t[1],t[0]]);const[n,o,r,i]=a(e,t),s=e.root.ownerDocument.createRange();return n&&r&&(s.setStart(n,o),s.setEnd(r,i)),s}function r(e,t,n,o){const{root:r}=e;if(!r.contains(t))return-1;if(t.nodeType===Node.ELEMENT_NODE){if(t.childNodes.length===n){if(null!=B.getLineNodeEnd(r,t))return B.getLineNodeEnd(r,t)-1;t.childNodes.length&&(n=c(e,t=t.childNodes[n-1]))}else t=t.childNodes[n],n=0;const i=B.getLineNodeStart(r,t);if(null!=i)return(null==o||o<i?i:i-1)+n}return i(e,t)+n}function i(e,t){var n;const{root:o}=e;if(!o.ownerDocument)return-1;const{lines:r,embeds:i}=e.typeset,s=R.createTreeWalker(o);let c;s.currentNode=t;let a,l=0;for(;(c=s.previousNode())&&c!==o;){if(null!=(a=B.getLineNodeStart(o,c))){l+=a;break}c.nodeType===Node.TEXT_NODE?l+=d(r,c):(null===(n=c.classList)||void 0===n?void 0:n.contains("decoration"))||(i.matches(c)&&!P.isBRPlaceholder(e,c)||r.matches(c))&&l++}return l}function s(e,t){const{root:n}=e;if(!n.ownerDocument)return;return Array.from(n.childNodes).find((e=>B.getLineNodeStart(n,e)<=t&&B.getLineNodeEnd(n,e)>t))}function c(e,t){var n;const{lines:o,embeds:r}=e.typeset;if(r.matches(t)&&!P.isBRPlaceholder(e,t))return 1;const i=R.createTreeWalker(t);let s,c=o.findByNode(t)?1:0;for(;s=i.nextNode();)s.nodeType===Node.TEXT_NODE?c+=d(o,s):(null===(n=s.classList)||void 0===n?void 0:n.contains("decoration"))||(r.matches(s)&&!P.isBRPlaceholder(e,s)||o.matches(s))&&c++;return c}function a(e,t){if(null==t)return[null,0,null,0];{const n=t[0]<=t[1],[o,r,i]=l(e,t[0],n?0:1),[s,c]=t[0]===t[1]?i?[o,r+(n?1:-1)]:[o,r]:l(e,t[1],n?1:0);return[o,r,s,c]}}function l(e,t,o){var r;const{root:i}=e;if(!i.ownerDocument)return n;const{lines:c,embeds:a}=e.typeset,l=Array.from(i.childNodes),u=s(e,t);if(!u)return n;if(c.findByNode(u,!0).frozen)return[u.parentNode,l.indexOf(u)+o,!0];const f=!(t-=B.getLineNodeStart(i,u)),h=R.createTreeWalker(u);let m,p=!1;for(;m=h.nextNode();)if(m.nodeType===Node.TEXT_NODE){const e=d(c,m);if(t<=e)return[m,t];t-=e}else if(null===(r=m.classList)||void 0===r?void 0:r.contains("decoration"));else if(a.matches(m)&&!P.isBRPlaceholder(e,m)){const e=a.findByNode(m);if(!e||!1===e.fromDom)continue;if((t-=1)<=0){const e=Array.from(m.parentNode.childNodes);return[m.parentNode,e.indexOf(m)+1+t]}}else if(c.matches(m)&&(p?t-=1:p=!0,0===t)){const e=h.firstChild();if(e&&e.nodeType===Node.TEXT_NODE)return[e,0];if(e){return[m,Array.from(m.childNodes).indexOf(e)]}return[m,0]}return f?[u,0]:n}function d(e,t){const n=t.nodeValue||"";return n.trim()||!e.matches(t.previousSibling)&&!e.matches(t.nextSibling)?n.length:0}t.getIndexFromPoint=function(e,t,n){const o=e.root.ownerDocument;if(o.caretPositionFromPoint)try{const i=o.caretPositionFromPoint(t,n);if(i)return r(e,i.offsetNode,i.offset)}catch(i){}if(o.caretRangeFromPoint){const i=o.caretRangeFromPoint(t,n);if(i)return r(e,i.startContainer,i.startOffset)}return null},t.getBrowserRange=o,t.getBoudingBrowserRange=function(e,t){const n=o(e,t);if((null==n?void 0:n.endContainer.nodeType)===Node.ELEMENT_NODE)try{n.setEnd(n.endContainer,n.endOffset+1)}catch(r){}return n},t.getIndexFromNodeAndOffset=r,t.getIndexFromNode=i,t.getLineElementAt=s,t.getNodeLength=c,t.getNodesForRange=a,t.getNodeAndOffset=l,t.textNodeLength=d})),H=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setSelection=t.getSelection=void 0,t.getSelection=function(e){const{root:t}=e,n=e.doc.selection;if(!t.ownerDocument)return null;const o=t.ownerDocument.getSelection();if(null!=o&&null!=o.anchorNode&&null!=o.focusNode&&t.contains(o.anchorNode)){const t=I.getIndexFromNodeAndOffset(e,o.anchorNode,o.anchorOffset,n&&n[0]);return[t,o.anchorNode===o.focusNode&&o.anchorOffset===o.focusOffset?t:I.getIndexFromNodeAndOffset(e,o.focusNode,o.focusOffset,n&&n[1])]}return null},t.setSelection=function(e,t){const{root:n}=e;if(!n.ownerDocument)return;const o=n.ownerDocument.getSelection();if(!o)return;const r=o.anchorNode&&n.contains(o.anchorNode)&&document.activeElement!==document.body;if(null==t)r&&(o.removeAllRanges(),n.classList.contains("focus")&&n.classList.remove("focus"));else{const[i,s,c,a]=I.getNodesForRange(e,t),l=t[0]===t[1]?"Caret":"Range";i&&c&&(o.anchorNode===i&&o.anchorOffset===s&&o.focusNode===c&&o.focusOffset===a&&o.type===l||o.setBaseAndExtent(i,s,c,a)),r||n.focus(),n.classList.contains("focus")||n.classList.add("focus")}n.dispatchEvent(new Event("select",{bubbles:!0}))}})),$=c((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0,(n=t.Source||(t.Source={})).api="api",n.user="user"})),z=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transformHistoryStack=t.undoStack=t.initHistory=t.history=void 0;const o=n(f),r=n(u);function s(e={}){return function(t){let n=0,r="",s=!1,c={undo:[],redo:[]};const a=i({maxStack:500,delay:0},e);function d(e){"historyUndo"===e.inputType?(e.preventDefault(),u()):"historyRedo"===e.inputType&&(e.preventDefault(),f())}function u(){y("undo","redo")}function f(){y("redo","undo")}function h(){return c.undo.length>0}function m(){return c.redo.length>0}function p(){n=0}function g(){c={undo:[],redo:[]}}function y(e,n){if(0===c[e].length)return;const o=c[e].pop();c[n].push(o),p(),s=!0,"function"==typeof o[e]?o[e]():t.update(o[e]),s=!1}function v({change:e,old:t,source:i}){return e?s?void 0:e.contentChanged?void(i===$.Source.user?function(e,t){const i=Date.now(),s=function(e){var t;const{ops:n}=e.delta;let o=0,r=n.length-1;if(n[o].retain&&!n[o].attributes&&o++,1===n[r].retain&&(null===(t=n[r].attributes)||void 0===t?void 0:t.id)&&r--,o===r){const e=n[o];if(e.delete)return"delete";if("\n"===e.insert)return"newline";if("string"==typeof e.insert)return"insert"}return""}(e);c.redo.length=0;const l=new o.default(null,e.delta.invert(t.toDelta()),t.selection);if(s&&r===s||p(),r=s,n&&(!a.delay||n+a.delay>i)&&c.undo.length){const t=c.undo[c.undo.length-1];t.redo.delta=t.redo.delta.compose(e.delta),t.redo.selection=e.selection,t.undo.delta=l.delta.compose(t.undo.delta)}else{const t=new o.default(null,e.delta,e.selection);n=i,c.undo.push({redo:t,undo:l})}c.undo.length>a.maxStack&&c.undo.shift()}(e,t):l(c,e)):p():g()}return{options:a,hasUndo:h,hasRedo:m,undo:u,redo:f,cutoffHistory:p,clearHistory:g,setStack:function(e){c=e},getStack:function(){return c},getActive:()=>({undo:h(),redo:m()}),commands:{undo:u,redo:f},shortcuts:{"win:Ctrl+Z":"undo","mac:Cmd+Z":"undo","win:Ctrl+Y":"redo","mac:Cmd+Shift+Z":"redo"},init(){t.on("change",v),t.root.addEventListener("beforeinput",d)},destroy(){t.off("change",v),t.root.removeEventListener("beforeinput",d)}}}}function c(){return{undo:[],redo:[]}}function l(e,t){const n=t instanceof r.default?new o.default(null,t):t;e.undo.forEach((e=>{e.undo=n.transform(e.undo,!0),e.redo=n.transform(e.redo,!0)})),e.redo.forEach((e=>{e.undo=n.transform(e.undo,!0),e.redo=n.transform(e.redo,!0)}))}t.history=s(),t.initHistory=s,t.undoStack=c,t.transformHistoryStack=l})),q=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;const o=n(p),r=n(u),i=n(f),s=j,c={characterData:!0,characterDataOldValue:!0,subtree:!0,childList:!0};function l(e,t){for(;t&&t.parentNode!==e;)t=t.parentNode;return t}t.input=function(e){let t=!1;function n(n){if(n.isComposing||t)return;const o=a(function(e){const t=e.children,n=t.length;if(!n)return;if(1===n&&t[0].key)return[t[0],t[0]];const o=t[t[0].key&&B.getLineNodeEnd(e,t[0])!==B.getLineNodeStart(e,t[1])?1:0],r=t[t[n-1].key&&B.getLineNodeEnd(e,t[n-2])!==B.getLineNodeStart(e,t[n-1])?n-2:n-1];return[o,r]}(e.root));if(o&&o.ops.length){const t=H.getSelection(e);s.cleanText(o),e.update(new i.default(e.doc,o,t))}}function a(t){const{doc:n}=e;if(t){const[o,i]=t,s=B.getLineNodeStart(e.root,o),c=B.getLineNodeEnd(e.root,i),a=j.deltaFromDom(e,{startNode:o,endNode:i.nextElementSibling||void 0});let l=n.toDelta().slice(s,c).diff(a);return l.ops.length&&s&&(l=(new r.default).retain(s).concat(l)),l}{const t=j.deltaFromDom(e);return n.toDelta().diff(t)}}const d=new window.MutationObserver((function(n){if(t=!0,setTimeout((()=>t=!1)),!e.enabled)return e.render();let c=function(t){const n=function(e){const t=new Set;if((e=e.filter((e=>"characterData"!==e.type||!t.has(e.target)&&(t.add(e.target),!0)))).length>3)return null;const n=e.find((e=>"characterData"===e.type));if(!n)return null;const o=e.find((e=>1===e.addedNodes.length&&"#text"===e.addedNodes[0].nodeName)),r=e.find((e=>1===e.addedNodes.length&&"BR"===e.addedNodes[0].nodeName||1===e.removedNodes.length&&"BR"===e.removedNodes[0].nodeName));return 1+(o?1:0)+(r?1:0)<e.length||o&&o.addedNodes[0]!==n.target?null:n}(t);if(!n||null==n.oldValue||null==n.target.nodeValue)return null;const i=new r.default,s=I.getIndexFromNode(e,n.target);i.retain(s);return o.default(n.oldValue.replace(/\xA0/g," "),n.target.nodeValue.replace(/\xA0/g," ")).forEach((([t,n])=>{t===o.default.EQUAL?i.retain(n.length):t===o.default.DELETE?i.delete(n.length):t===o.default.INSERT&&i.insert(n,e.activeFormats)})),i.chop(),i}(n);const d=H.getSelection(e);if(!c){c=a(function(e,t){let n,o;for(let r=0;r<t.length;r++){const i=t[r];let s=l(e,i.target);if(!s&&i.nextSibling&&(s=l(e,i.nextSibling)),!s&&i.previousSibling&&(s=l(e,i.previousSibling)),s&&s.key)(!n||B.getLineNodeStart(e,s)<B.getLineNodeStart(e,n))&&(n=s),(!o||B.getLineNodeStart(e,s)>B.getLineNodeStart(e,o))&&(o=s);else if(i.target.key)return}if(n&&o)return[n,o]}(e.root,n))}c&&c.ops.length&&(s.cleanText(c),e.update(new i.default(e.doc,c,d)))}));function u(){d.disconnect()}function f(){d.observe(e.root,c)}return{init(){e.root.addEventListener("input",n),e.on("rendering",u),e.on("render",f)},destroy(){d.disconnect(),e.root.removeEventListener("input",n),e.off("rendering",u),e.off("render",f)}}}})),W=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.shortcutFromEvent=t.addShortcutsToEvent=void 0;const n={Control:!0,Meta:!0,Shift:!0,Alt:!0},o=-1!==navigator.userAgent.indexOf("Macintosh"),r=o?/Cmd/:/Ctrl/;function i(e){const t=[];let r=e.key;return r?(" "===r&&(r="Space"),e.metaKey&&t.push("Cmd"),e.ctrlKey&&t.push("Ctrl"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),n[r]||(o&&e.altKey&&e.code&&e.code.startsWith("Key")&&(r=e.code.replace("Key","")),1===r.length&&(r=r.toUpperCase()),t.push(r)),t.join("+")):""}t.addShortcutsToEvent=function(e){return e.shortcut=i(e),e.osShortcut=`${o?"mac":"win"}:${e.shortcut}`,e.modShortcut=e.shortcut.replace(r,"Mod"),e},t.shortcutFromEvent=i})),V=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.keyboard=void 0;const n={};t.keyboard=function(e){function t(t){var o;if(t.isComposing)return;W.addShortcutsToEvent(t);const r=n=>{const o=e.shortcuts[n];if(o&&e.commands[o])return t.preventDefault(),!1!==e.commands[o]()};if(!r(t.shortcut)&&!r(t.osShortcut)&&!r(t.modShortcut)){switch(t.modShortcut){case"Enter":return function(t){if(t.defaultPrevented)return;t.preventDefault();const{typeset:{lines:o},doc:r}=e,{selection:i}=r;if(!i)return;const[s,c]=i,a=s===c,l=r.getLineAt(i[0]),[d,u]=r.getLineRange(i[0]);let f,h=l.attributes;const m=o.findByAttributes(h,!0),p=c===d,g=c===u-1;l.length-1||m===o.default||m.contained||m.defaultFollows||m.frozen||!a?(g&&(m.nextLineAttributes||m.defaultFollows||m.frozen)?h=m.nextLineAttributes?m.nextLineAttributes(h):n:p&&(m.defaultFollows&&(h=n),f={dontFixNewline:!0}),e.insert("\n",h,i,f)):e.formatLine(n)}(t);case"Shift+Enter":return function(t){if(t.defaultPrevented)return;t.preventDefault();const{typeset:n,doc:o}=e;n.embeds.get("br")&&o.selection&&e.insert({br:!0})}(t);case"Tab":case"Shift+Tab":case"Mod+]":case"Mod+[":return function(t){if(t.defaultPrevented)return;t.preventDefault();const n=t.modShortcut;"Tab"===n||"Mod+]"===n?e.indent():e.outdent()}(t)}switch(null===(o=t.modShortcut)||void 0===o?void 0:o.split("+").pop()){case"Backspace":return function(t){if(t.defaultPrevented)return;const{typeset:{lines:o},doc:r}=e,{selection:i}=r;if(!i)return;const s=i[0]===i[1],c=i[0],[a]=r.getLineRange(i[0]);if(!s||c===a)if(t.preventDefault(),i[0]+i[1]===0)l(r.getLineAt(i[0]),!0);else{const t=g.normalizeRange(i),n=r.getLineAt(t[0]),s=o.findByAttributes(n.attributes,!0);if(i[0]===i[1]&&i[0]===r.getLineRange(i[0])[0]&&!s.contained){if(l(r.getLineAt(i[0])))return;const o=r.lines[r.lines.indexOf(n)-1];if(o&&1===o.length&&1!==n.length)return e.update(e.change.delete([t[0]-2,t[1]-1]).select(t[0]-1))}e.delete(-1,{dontFixNewline:s.frozen})}function l(t,r){if(!t)return;const i=o.findByAttributes(t.attributes,!0);return i?i.indentable&&t.attributes.indent?(e.outdent(),!0):r||i!==o.default&&!i.defaultFollows?(e.formatLine(n),!0):void 0:void 0}}(t);case"Delete":return function(t){if(t.defaultPrevented)return;const{doc:n}=e,{selection:o}=n;if(!o)return;const r=o[0]===o[1],i=o[0],[s,c]=n.getLineRange(o[0]);if(r&&i!==c-1)return;let a;if(t.preventDefault(),o[0]===o[1]){const e=g.normalizeRange(o),t=n.getLineAt(e[0]),r=n.lines[n.lines.indexOf(t)-1];1===t.length&&r&&1!==r.length&&(a={dontFixNewline:!0})}e.delete(1,a)}(t);default:return}}}return{init(){e.root.addEventListener("keydown",t)},destroy(){e.root.removeEventListener("keydown",t)}}}})),X=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.paste=t.PasteEvent=void 0;const o=n(u),r=n(m),c=n(h),l={dontFixNewline:!0};class d extends Event{constructor(e,t){super(e,t),this.delta=t.delta,this.html=t.html,this.text=t.text}}function f(e){const t=e.attributes,{id:n}=t;return s(t,["id"])}t.PasteEvent=d,t.paste=function(e){function t(t){t.preventDefault();const n=t.clipboardData,{doc:s}=e,a=s.selection&&g.normalizeRange(s.selection);if(!n||!a)return;let u=a.slice();const h=n.getData("text/html"),m=n.getData("text/plain");let p;if(h)p=j.deltaFromHTML(e,h,{possiblePartial:!0});else{if(!m)return;p=(new o.default).insert(m)}if(p.filter((e=>"string"==typeof e.insert&&e.insert.includes("\n"))).length>0){let e=r.default.fromDelta(p,s.byId);p=r.default.toDelta(e);const t=s.getLineAt(u[0]),n=s.getLineAt(u[1]),a=f(t),l=t===n?a:f(n);h||(e=e.map((e=>i(i({},e),{attributes:t.attributes}))),a!==l&&(e[e.length-1].attributes=n.attributes));const d=e[0],m=f(d),g=e[e.length-1],y=d===g?m:f(g);c.default(a,m)||(p=(new o.default).insert("\n",a).concat(p)),c.default(l,y)&&(p=p.slice(0,p.length()-1))}const y=new d("paste",{delta:p,html:h,text:m,cancelable:!0});if(e.dispatchEvent(y),p=y.delta,!y.defaultPrevented&&p&&p.ops.length){const t=e.change.delete(u,l).insertContent(u[0],p).select(a[0]+p.length());e.update(t)}}return{init(){e.root.addEventListener("paste",t)},destroy(){e.root.removeEventListener("paste",t)}}}})),K=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.copy=void 0;const o=n(d);t.copy=function(e){function t(t){t.preventDefault();const n=t.clipboardData,{doc:r}=e,{selection:i}=r;if(!r.selection)return;if(!n||!i)return;const s=g.normalizeRange(r.selection),c=r.slice(s[0],s[1]);if(!c.ops.length)return;const a=c.map((e=>"string"==typeof e.insert?e.insert:" ")).join("");let l;a.includes("\n")?(c.push({insert:"\n",attributes:r.getLineFormat(s[1])}),l=j.docToHTML(e,new o.default(c))):l=j.inlineToHTML(e,c),n.setData("text/plain",a),n.setData("text/html",l)}function n(n){t(n),e.delete()}return{init(){e.root.addEventListener("copy",t),e.root.addEventListener("cut",n)},destroy(){e.root.removeEventListener("copy",t),e.root.removeEventListener("cut",n)}}}})),Z=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.rendering=void 0,t.rendering=function(e){function t(t){const{doc:n,old:o}=e.modules.decorations||t;o.lines!==n.lines&&B.renderChanges(e,o,n)}return e.on("change",t),{render:function(t){if(t){const{doc:n,old:o}=t;o&&n?B.renderChanges(e,o,n):n&&B.render(e,n)}else{const{doc:t}=e.modules.decorations||e;B.render(e,t)}},destroy(){e.off("change",t)}}}})),U=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.selection=void 0;const o=n(h);t.selection=function(e){let t,n,r=!1;function i(){if(r)return;const t=H.getSelection(e),{doc:n}=e;if(!o.default(n.selection,t)){if(t&&t[0]===t[1]&&t[0]>=n.length)return;e.select(t)}}function s(){r||H.setSelection(e,e.doc.selection)}function c(){const{doc:t,typeset:{lines:n}}=e,o=e.modules.decorations.getDecorator("selection");o.clear();const r=t.selection;r&&t.getLinesAt(r).forEach((e=>{if(1===e.length&&n.findByAttributes(e.attributes,!0).frozen){const n=r[0]===r[1];o.decorateLine(t.getLineRange(e)[0],{class:"selected"+(n?" focus":"")})}})),o.apply()}function a(t){const n=B.getLineNodeStart(e.root,t.target),o=null!=n&&e.doc.getLineAt(n),r=o&&e.typeset.lines.findByAttributes(o.attributes);null!=n&&o&&1===o.length&&r&&r.frozen&&(t.preventDefault(),e.select(n))}function l(t){var n;const o=(null===(n=t.doc)||void 0===n?void 0:n.selection)||e.doc.selection;r=!0,setTimeout((()=>r=!1)),H.setSelection(e,o)}function d(){e.root.classList.toggle("window-inactive",!t.hasFocus())}return{pause:function(){r=!0;const{selection:t}=e.doc,{decorations:n}=e.modules;if(t&&t[0]!==t[1]&&n){n.getDecorator("pausedSelection").decorateText(t,{class:"selected"}).apply()}},resume:function(){r=!1;const{decorations:t}=e.modules;t&&t.removeDecorations("pausedSelection"),setTimeout(s)},renderSelection:s,init(){t=e.root.ownerDocument,n=t.defaultView,t.addEventListener("selectionchange",i),n.addEventListener("focus",d),n.addEventListener("blur",d),e.root.addEventListener("mousedown",a),e.on("change",l),e.on("decorate",c)},destroy(){t.removeEventListener("selectionchange",i),n.removeEventListener("focus",d),n.removeEventListener("blur",d),e.root.addEventListener("mousedown",a),e.off("change",l),e.off("decorate",c),r=!1,t=null,n=null}}}})),Q=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.placeholder=void 0;const o=n(h);t.placeholder=function(e,t){return n=>{function r({doc:r}){var i,s,c;const a=n.modules.decorations.getDecorator("placeholder"),l=("function"==typeof e?e():e)||"";let d;if(a.hasDecorations()){const e=a.getDecoration().ops;d=null===(s=null===(i=e[e.length-1].attributes)||void 0===i?void 0:i.decoration)||void 0===s?void 0:s.placeholder}const{lines:u}=n.typeset,f=u.findByAttributes(null===(c=r.lines[0])||void 0===c?void 0:c.attributes,!0),h=u.default===f&&1===r.length;if(h||(null==t?void 0:t.keepAttribute)){const e={"data-placeholder":l||""};h&&(e.class="placeholder"),o.default(e,d)||(a.remove(),a.decorateLine(0,e).apply())}else a.remove()}return n.addEventListener("decorate",r),{destroy(){n.removeEventListener("decorate",r)}}}}})),Y=c((function(e,t){var n=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.smartQuotes=void 0;const o=n(u),r=/['"]/g,i=/[\s\{\[\(\<'"\u2018\u201C]/,s={'"':{left:"“",right:"”"},"'":{left:"‘",right:"’"}};t.smartQuotes=function(e){function t(e){const{change:t,source:n,doc:c,old:a}=e;if("user"!==n||!a.selection||!t)return;const l=function(e){const t=[];let n=0;return e.forEach((e=>{if(e.retain&&(n+=e.retain),e.delete&&(n-=e.delete),"string"==typeof e.insert){let o;for(;o=r.exec(e.insert);)t.push(n+o.index);n+=e.insert.length}})),t}(t.delta.ops);if(!l.length)return;const d=c.getText(),u=new o.default;let f=0;for(let o=0;o<l.length;o++){const e=l[o],t=d[e],n=!e||i.test(d[e-1])?s[t].left:s[t].right;u.retain(e-f).delete(1).insert(n),f=e+1}e.modify(u)}return e.on("changing",t),{destroy(){e.off("changing",t)}}}})),J=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.smartEntry=t.defaultHandlers=t.textReplace=t.markReplace=t.linkReplace=t.lineReplace=t.textReplacements=t.linkReplacements=t.markReplacements=t.lineReplacements=void 0;function n(e,n,o){return t.lineReplacements.some((([t,r])=>{const i=o.match(t);if(i){const t=r(i[1]);if(!e.typeset.lines.findByAttributes(t))return!1;const s=n-o.length,c=e.change.delete([s,n]).formatLine(n,t).select([s,s]);return e.update(c),!0}return!1}))}function o(e,n,o){return t.linkReplacements.some((([t,r])=>{const i=o.match(t);if(i){let t=i[0].slice(0,-1);"."===t[t.length-1]&&(t=t.slice(0,-1));const o=n-(i[0].length-t.length),s=r(t);return!!e.typeset.formats.findByAttributes(s)&&(e.formatText(s,[o-t.length,o]),!0)}return!1}))}function r(e,n,o){return t.textReplacements.some((([t,r])=>{const i=o.match(t);return!!i&&(e.insert(r(i[1]),void 0,[n-i[0].length,n]),!0)}))}t.lineReplacements=[[/^(#{1,6}) $/,e=>({header:e.length})],[/^[-*] $/,()=>({list:"bullet"})],[/^1\. $/,()=>({list:"ordered"})],[/^([AaIi])\. $/,e=>({list:"ordered",type:e})],[/^(-?\d+)\. $/,e=>({list:"ordered",start:e})],[/^([A-Z])\. $/,e=>({list:"ordered",type:"A",start:e.charCodeAt(0)-"A".charCodeAt(0)+1})],[/^([a-z])\. $/,e=>({list:"ordered",type:"a",start:e.charCodeAt(0)-"a".charCodeAt(0)+1})],[/^([IVXLCDM]+)\. $/i,e=>({list:"ordered",type:e[0].toUpperCase()===e[0]?"I":"i",start:s(e)})],[/^> $/,()=>({blockquote:!0})]],t.markReplacements=[[/(\*|_){3}(\b(?:(?!\1).)+\b)\1{3}((?:(?!\1).))$/s,()=>({bold:!0,italic:!0})],[/(\*|_){2}(\b(?:(?!\1).)+\b)\1{2}((?:(?!\1).))$/s,()=>({bold:!0})],[/(\*|_){1}(\b(?:(?!\1).)+\b)\1{1}((?:(?!\1).))$/s,()=>({italic:!0})]],t.linkReplacements=[[/(https?:\/\/.)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b[-a-zA-Z0-9@:%_+.~#?&/=]*\s$/s,e=>({link:e})],[/(www\.)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b[-a-zA-Z0-9@:%_+.~#?&/=]*\s$/s,e=>({link:"https://"+e})],[/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.(com|org|net|io)\b[-a-zA-Z0-9@:%_+.~#?&/=]*\s$/s,e=>({link:"https://"+e})]],t.textReplacements=[[/--$/,()=>"—"],[/\.\.\.$/,()=>"…"]],t.lineReplace=n,t.linkReplace=o,t.markReplace=function(e,n,o,r){return t.markReplacements.some((([t,i])=>{const s=o.match(t);if(s){let[t,o,c,a]=s;const l=i(c);if(!e.typeset.formats.findByAttributes(l))return!1;t.length,c.length,a.length," "===a&&" "===r[n]&&(a="");const d=n-a.length;return e.insert(c,l,[d-t.length+a.length,d]),!0}return!1}))},t.textReplace=r,t.defaultHandlers=[n,r,o],t.smartEntry=function(e=t.defaultHandlers){return t=>{let n=!1;function o({change:o,source:r}){if(n||"user"!==r||!t.doc.selection||!o||!function(e){return(1===e.ops.length||2===e.ops.length&&e.ops[0].retain&&!e.ops[0].attributes)&&e.ops[e.ops.length-1].insert}(o.delta))return;const i=t.doc.selection[1],s=t.doc.getText(),c=s.lastIndexOf("\n",i-2)+1,a=s.slice(c,i);n=!0,e.some((e=>e(t,i,a,s))),n=!1}return t.on("change",o),{destroy(){t.off("change",o)}}}};const i={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3};function s(e){e=e.toUpperCase();let t=0;for(let n=0;n<e.length;n++){const o=i[e[n]],r=i[e[n+1]];if(void 0===o)return;o<r?(t+=r-o,n++):t+=o}return t}})),G=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultModules=void 0,t.defaultModules={keyboard:V.keyboard,input:q.input,copy:K.copy,paste:X.paste,history:z.history,decorations:C.decorations,rendering:Z.rendering,selection:U.selection}})),ee=c((function(e,t){var n=a&&a.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),o=a&&a.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultModules=t.smartEntry=t.smartQuotes=t.placeholder=t.selection=t.rendering=t.copy=t.PasteEvent=t.paste=t.keyboard=t.input=t.undoStack=t.history=t.Decorator=t.DecorateEvent=t.decorations=void 0,Object.defineProperty(t,"decorations",{enumerable:!0,get:function(){return C.decorations}}),Object.defineProperty(t,"DecorateEvent",{enumerable:!0,get:function(){return C.DecorateEvent}}),Object.defineProperty(t,"Decorator",{enumerable:!0,get:function(){return C.Decorator}}),Object.defineProperty(t,"history",{enumerable:!0,get:function(){return z.history}}),Object.defineProperty(t,"undoStack",{enumerable:!0,get:function(){return z.undoStack}}),Object.defineProperty(t,"input",{enumerable:!0,get:function(){return q.input}}),o(W,t),Object.defineProperty(t,"keyboard",{enumerable:!0,get:function(){return V.keyboard}}),Object.defineProperty(t,"paste",{enumerable:!0,get:function(){return X.paste}}),Object.defineProperty(t,"PasteEvent",{enumerable:!0,get:function(){return X.PasteEvent}}),Object.defineProperty(t,"copy",{enumerable:!0,get:function(){return K.copy}}),Object.defineProperty(t,"rendering",{enumerable:!0,get:function(){return Z.rendering}}),Object.defineProperty(t,"selection",{enumerable:!0,get:function(){return U.selection}}),Object.defineProperty(t,"placeholder",{enumerable:!0,get:function(){return Q.placeholder}}),Object.defineProperty(t,"smartQuotes",{enumerable:!0,get:function(){return Y.smartQuotes}}),Object.defineProperty(t,"smartEntry",{enumerable:!0,get:function(){return J.smartEntry}}),Object.defineProperty(t,"defaultModules",{enumerable:!0,get:function(){return G.defaultModules}})}));c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hr=t.codeblock=t.blockquote=t.list=t.header=t.paragraph=void 0,t.paragraph=A.line({name:"paragraph",selector:"p",commands:e=>()=>e.formatLine({}),shortcuts:"Mod+0",render:(e,t)=>x.h("p",null,t)}),t.header=A.line({name:"header",selector:"h1, h2, h3, h4, h5, h6",defaultFollows:!0,commands:e=>({header:t=>e.toggleLineFormat({header:t}),header1:()=>e.toggleLineFormat({header:1}),header2:()=>e.toggleLineFormat({header:2}),header3:()=>e.toggleLineFormat({header:3}),header4:()=>e.toggleLineFormat({header:4}),header5:()=>e.toggleLineFormat({header:5}),header6:()=>e.toggleLineFormat({header:6})}),shortcuts:{"Mod+1":"header1","Mod+2":"header2","Mod+3":"header3","Mod+4":"header4","Mod+5":"header5","Mod+6":"header6"},fromDom:e=>({header:parseInt(e.nodeName.replace("H",""))}),render:(e,t)=>x.h(`h${e.header}`,null,t)}),t.list=A.line({name:"list",selector:"ul > li, ol > li",indentable:!0,commands:e=>({bulletList:()=>e.toggleLineFormat({list:"bullet"}),orderedList:()=>e.toggleLineFormat({list:"ordered"}),checkList:()=>e.toggleLineFormat({list:"check"}),indent:()=>e.indent(),outdent:()=>e.outdent(),toggleCheck:t=>{const n="string"==typeof t?e.doc.byId[t]:e.doc.selection?e.doc.getLineAt(e.doc.selection[0]):null;if(!n)return!1;const[o]=e.doc.getLineRange(n),r={list:"check"};n.attributes.checked||(r.checked=!0),e.formatLine(r,o)}}),shortcuts:{"Mod+Space":"toggleCheck"},fromDom(e){let t=-1,n=e.parentNode;const o=e.hasAttribute("data-checked")?"check":n&&"OL"===n.nodeName?"ordered":"bullet";for(;n;){if(/^UL|OL$/.test(n.nodeName))t++;else if("LI"!==n.nodeName)break;n=n.parentNode}!t&&e.className.startsWith("ql-indent-")&&(t=parseInt(e.className.replace("ql-indent-","")));const r={list:o};return t&&(r.indent=t),"true"===e.getAttribute("data-checked")&&(r.checked=!0),r},nextLineAttributes(e){const{start:t}=e;return s(e,["start"])},shouldCombine:(e,t)=>e.list===t.list||t.indent,renderMultiple:(e,t)=>{const n=[],o=[];return e.forEach((([e,r])=>{const s="ordered"===e.list?"ol":"ul",c=e.indent||0;let a={key:e.id};if("check"===e.list){let n=function(n){t.enabled&&(n.preventDefault(),t.commands.toggleCheck(e.id))};const o=x.h("button",{class:"check-list-check",onmousedown:n,ontouchstart:n});1===r.length&&"br"===r[0].type?r.push(o):r.unshift(o),a=i(i({},a),{class:"check-list-item","data-checked":""+(e.checked||!1)})}const l=C.applyDecorations(x.h("li",a,r),e);for(;c>=o.length;){const t=x.h(s,{start:e.start,type:e.type}),r=o.length?o[o.length-1].children:n,i=r[r.length-1];"object"==typeof i&&"li"===i.type?i.children.push(t):r.push(t),o.push(t)}if(!function(e,t,n){return e.type===t&&(e.props.start===n.start||e.props.start&&!n.start)&&e.props.type===n.type}(o[c],s,e)){const t=x.h(s,{start:e.start,type:e.type});(c?o[c-1].children:n).push(t),o[c]=t}o[c].children.push(l),o.length=c+1})),n[0]}}),t.blockquote=A.line({name:"blockquote",selector:"blockquote p",commands:e=>(t=!0)=>{"string"!=typeof t&&(t=!0),e.toggleLineFormat({blockquote:t})},fromDom(e){const{className:t}=e.parentNode,n=t.match(/quote-(\S+)/);return{blockquote:n&&"true"!==n[1]&&n[1]||!0}},shouldCombine:(e,t)=>e.blockquote===t.blockquote,renderMultiple:e=>{const t=e[0][0].blockquote,n="string"==typeof t?{className:`quote-${t}`}:null,o=e.map((([e,t])=>x.h("p",{key:e.id},t)));return x.h("blockquote",n,o)}}),t.codeblock=A.line({name:"code-block",selector:"pre code",contained:!0,commands:e=>()=>e.toggleLineFormat({"code-block":!0}),renderMultiple:e=>{const t=[];return e.forEach((([e,n])=>{n.length&&"br"===n[n.length-1].type&&n.pop(),t.push(x.h("code",{key:e.id},n)),t.push("\n")})),x.h("pre",{spellcheck:!1},t)}}),t.hr=A.line({name:"hr",selector:"hr",frozen:!0,commands:e=>()=>{const{doc:t}=e,{selection:n}=t;if(!n)return;const o=g.normalizeRange(n),r=e.change.delete(o);o[0]===o[1]&&1===t.getLineAt(o[0]).length?(r.formatLine(o[0],{hr:!0}),r.select(o[0]+1)):(r.insert(o[0],"\n",{hr:!0}),r.select(o[0]+2)),e.update(r)},render:()=>x.h("hr")})})),c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.link=t.code=t.italic=t.bold=void 0,t.bold=A.format({name:"bold",selector:"strong, b",styleSelector:'[style*="font-weight:bold"], [style*="font-weight: bold"]',commands:e=>()=>e.toggleTextFormat({bold:!0}),shortcuts:"Mod+B",render:(e,t)=>x.h("strong",null,t)}),t.italic=A.format({name:"italic",selector:"em, i",styleSelector:'[style*="font-style:italic"], [style*="font-style: italic"]',commands:e=>()=>e.toggleTextFormat({italic:!0}),shortcuts:"Mod+I",render:(e,t)=>x.h("em",null,t)}),t.code=A.format({name:"code",selector:"code",commands:e=>()=>e.toggleTextFormat({code:!0}),render:(e,t)=>x.h("code",null,t)}),t.link=A.format({name:"link",selector:"a[href]",greedy:!1,commands:e=>t=>e.toggleTextFormat({link:t}),fromDom:e=>e.href,render:(e,t)=>x.h("a",{href:e.link,target:"_blank"},t)})})),c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.br=t.image=void 0,t.image=A.embed({name:"image",selector:"img",commands:e=>(t,n)=>e.insert(i({image:t},n)),fromDom:e=>{const t={};return["src","alt","width","height"].forEach((n=>{if(!e.hasAttribute(n))return;const o=e.getAttribute(n);"src"===n&&(n="image"),t[n]=o})),t},render:e=>{const{image:t}=e,n=s(e,["image"]);return n.src=t,x.h("img",n)}}),t.br=A.embed({name:"br",selector:"br",commands:e=>()=>e.insert({br:!0}),render:()=>x.h("br")})}));var te=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTypes=void 0,t.defaultTypes={lines:["paragraph","header","list","blockquote","code-block","hr"],formats:["link","bold","italic","code"],embeds:["image","br"]}})),ne=c((function(e,t){var n=a&&a.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),o=a&&a.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=a&&a.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorFormatEvent=t.EditorChangeEvent=void 0;const c=s(d),l=r(f),h=s(u),p=s(y),v=s(m),b=s(F),E={},L=[],_=["focus","blur","keydown","mousedown","mouseup","click"],N=new WeakMap;class w extends Event{constructor(e,t){super(e,t),this.old=t.old,this.doc=t.doc,this.change=t.change,this.changedLines=t.changedLines,this.source=t.source}modify(e){if(!this.cancelable)throw new Error('Cannot modify an applied change, listen to the "changing" event');this.doc=this.doc.apply(e),this.change&&(this.change.delta=this.change.delta.compose(e)),this.changedLines&&(this.changedLines=this.old.lines===this.doc.lines?L:M(this.old,this.doc))}}t.EditorChangeEvent=w;class k extends Event{constructor(e,t){super(e,t),this.formats=t.formats}}t.EditorFormatEvent=k;class D extends b.default{constructor(e={}){super(),this.activeFormats=E,this.commands={},this.shortcuts={},this.modules={},this.identifier=e.identifier,this.typeset=new A.Typeset(e.types||te.defaultTypes),e.doc?this.doc=e.doc:e.html?this.doc=j.docFromHTML(this,e.html):e.text?this.doc=new c.default((new h.default).insert(e.text)):this.doc=new c.default,this._enabled=void 0===e.enabled||e.enabled,this._modules=i(i({},G.defaultModules),e.modules),e.root&&this.setRoot(e.root)}get root(){return this._root||this.setRoot(document.createElement("div")),this._root}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._root&&(this._root.contentEditable=e?"true":"inherit")}get change(){const e=new l.default(this.doc);return e.apply=(t=$.Source.user)=>this.update(e,t),e}setRoot(e){if(!e)throw new TypeError("Root must be set, cannot be "+e);return this.destroy(),this._root=e,this.init(),this.dispatchEvent(new Event("root")),this}update(e,t=$.Source.user){if(!this.enabled&&t===$.Source.user)return this;e instanceof h.default&&(e=new l.default(this.doc,e));const n=this.doc,o=n.apply(e),r=n.lines===o.lines?L:M(n,o);return this.set(o,t,e,r),this}set(e,t=$.Source.user,n,o){const r=this.doc;if(e instanceof h.default&&(e=new c.default(e)),!this.enabled&&t===$.Source.user||!e||r.equals(e))return this;const s=new w("changing",{cancelable:!0,old:r,doc:e,change:n,changedLines:o,source:t});return this.dispatchEvent(s),s.defaultPrevented||r.equals(s.doc)||(this.activeFormats=O(this,s.doc),this.doc=s.doc,this.dispatchEvent(new w("change",i(i({},s),{cancelable:!1}))),this.dispatchEvent(new w("changed",i(i({},s),{cancelable:!1})))),this}getHTML(){return j.docToHTML(this,this.doc)}setHTML(e,t=this.doc.selection,n){return this.set(j.docFromHTML(this,e,t))}getDelta(){return this.doc.toDelta()}setDelta(e,t=this.doc.selection,n){return this.set(new c.default(e,t),n)}getText(e){return this.doc.getText(e)}setText(e,t=this.doc.selection,n){return this.set(new c.default((new h.default).insert(e),t),n)}getActive(){const{selection:e}=this.doc;let t=e?e[0]===e[1]?i(i({},this.activeFormats),this.doc.getLineFormat(e)):i({},this.doc.getFormats(e)):{};return Object.values(this.modules).forEach((e=>{e.getActive&&(t=i(i({},t),e.getActive()))})),t}select(e){return this.update(this.change.select(e))}insert(e,t,n=this.doc.selection,o){if(!n)return this;null==t&&"string"==typeof e&&"\n"!==e&&(t=n===this.doc.selection?this.activeFormats:O(this,this.doc,n));const r=this.typeset.lines.findByAttributes(t,!0),s=this.change.delete(n),c=g.normalizeRange(n)[0];if("\n"===e&&r.frozen){const e=i({},this.doc.getLineFormat(c)),n=i(i({},t),{id:v.default.createId(this.doc.byId)});let o=i(i({},e),{id:v.default.createId(this.doc.byId)});const r=(new h.default).insert("\n",e);this.doc.getLineRange(c)[1]-1!==c?r.insert("\n",n):o=n,s.insertContent(c,r).formatLine(c,o).select(c+2)}else s.insert(c,e,t,o);return console.log(s),this.update(s)}insertContent(e,t=this.doc.selection){if(!t)return this;const n=this.change.delete(t).insertContent(t[0],e);return this.update(n)}delete(e,t){let n;if(Array.isArray(e))n=g.normalizeRange(e);else{if(!this.doc.selection)return this;n=g.normalizeRange(this.doc.selection),e&&n[0]===n[1]&&(n=e<0?[n[0]+e,n[1]]:[n[0],n[1]+e])}const o=this.change.delete(n,t).select(n[0]);return this.update(o)}formatText(e,t=this.doc.selection){return t?("string"==typeof e&&(e={[e]:!0}),t[0]===t[1]?(this.activeFormats=p.default.compose(this.activeFormats,e)||E,this.dispatchEvent(new k("format",{formats:this.activeFormats})),this):(T(this,"formatText",e,t),this)):this}toggleTextFormat(e,t=this.doc.selection){return t?("string"==typeof e&&(e={[e]:!0}),t[0]===t[1]?(l.hasFormat(e,this.activeFormats)&&(e=p.default.invert(e)),this.activeFormats=p.default.compose(this.activeFormats,e)||E,this.dispatchEvent(new k("format",{formats:this.activeFormats})),this):(T(this,"toggleTextFormat",e,t),this)):this}formatLine(e,t=this.doc.selection){return"string"==typeof e&&(e={[e]:!0}),T(this,"formatLine",e,t),this}toggleLineFormat(e,t=this.doc.selection){return"string"==typeof e&&(e={[e]:!0}),T(this,"toggleLineFormat",e,t),this}indent(){return R(this,1),this}outdent(){return R(this,-1),this}removeFormat(e=this.doc.selection){return T(this,"removeFormat",null,e),this}getBounds(e,t,n){var o;"number"==typeof e&&(e=[e,e]);let r=null===(o=I.getBoudingBrowserRange(this,e))||void 0===o?void 0:o.getBoundingClientRect();if(r&&t){const e=t.getBoundingClientRect(),o=(n?t.scrollLeft:0)-e.x,i=(n?t.scrollTop:0)-e.y;r=new DOMRect(r.x+o,r.y+i,r.width,r.height)}return r}getAllBounds(e,t,n){var o;"number"==typeof e&&(e=[e,e]);const r=null===(o=I.getBoudingBrowserRange(this,e))||void 0===o?void 0:o.getClientRects();let i=r&&Array.from(r);if(i&&t){const e=t.getBoundingClientRect(),o=(n?t.scrollLeft:0)-e.x,r=(n?t.scrollTop:0)-e.y;i=i.map((e=>new DOMRect(e.x+o,e.y+r,e.width,e.height)))}return i}getIndexFromPoint(e,t){return I.getIndexFromPoint(this,e,t)}render(){var e,t,n;return null===(e=this.modules.decorations)||void 0===e||e.gatherDecorations(),null===(t=this.modules.rendering)||void 0===t||t.render(),null===(n=this.modules.selection)||void 0===n||n.renderSelection(),this}init(){const e=this._root;e.editor&&e.editor.destroy(),e.editor=this,this.enabled=this._enabled,this.commands={},_.forEach((e=>this._root.addEventListener(e,P(this)))),this.typeset.lines.list.forEach((e=>e.commands&&x(this,e.name,e.commands(this)))),this.typeset.formats.list.forEach((e=>e.commands&&x(this,e.name,e.commands(this)))),this.typeset.embeds.list.forEach((e=>e.commands&&x(this,e.name,e.commands(this)))),Object.keys(this._modules).forEach((e=>{if(!this._modules[e])return;const t=this.modules[e]=this._modules[e](this);t.commands&&x(this,e,t.commands)})),this.shortcuts=function(e){const t={},{typeset:{lines:n,formats:o,embeds:r},modules:i}=e;return B(n,t),B(o,t),B(r,t),function(e,t){Object.keys(e).forEach((n=>{var o;const r=null===(o=e[n])||void 0===o?void 0:o.shortcuts;r&&H(r,t)}))}(i,t),t}(this),Object.keys(this.modules).forEach((e=>{var t,n;return null===(n=(t=this.modules[e]).init)||void 0===n?void 0:n.call(t)})),this.render()}destroy(){const e=this._root;e&&(_.forEach((t=>e.removeEventListener(t,P(this)))),Object.values(this.modules).forEach((e=>e.destroy&&e.destroy())),this._root=void 0,delete e.editor)}}function T(e,t,n,o){if(!o)return;const r=e.change[t](o,n);e.update(r)}function O(e,t,n=t.selection){const{formats:o}=e.typeset;if(!n||0===n[0])return E;const r=g.normalizeRange(n)[0];let i=r;const s=t.getTextFormat(i),c={};return Object.keys(s).forEach((e=>{const n=o.get(e);n&&(!1!==n.greedy||t.getTextFormat(r)[e])&&(c[e]=s[e])})),c}function M(e,t){const n=new Set(e.lines);return t.lines.filter((e=>!n.has(e)))}function x(e,t,n){n&&("function"==typeof n?e.commands[t]=S(e,n):Object.keys(n).forEach((t=>e.commands[t]=S(e,n[t]))))}function S(e,t){return()=>{t(),e.doc.selection&&e.root.focus()}}function R(e,t=1){const{typeset:{lines:n},doc:o}=e,{selection:r}=o;if(!r)return o;const s=e.change;o.getLinesAt(r).forEach((e=>{if(!n.findByAttributes(e.attributes,!0).indentable)return;const r=o.getLineRange(e);let c=(e.attributes.indent||0)+t;c<=0&&(c=null),s.formatLine(r[0],c<0?E:i(i({},e.attributes),{indent:c}))})),e.update(s)}function P(e){let t=N.get(e);return t||(t=C.bind(e),N.set(e,t)),t}function C(e){this.dispatchEvent(e)}function B(e,t){e.list.forEach((e=>{const n=e.shortcuts;n&&("string"==typeof n?t[n]=e.name:H(n,t))}))}function H(e,t){Object.keys(e).forEach((n=>t[n]=e[n]))}t.default=D})),oe=c((function(e,t){var n=a&&a.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),o=a&&a.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)},r=a&&a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=t.TextDocument=t.TextChange=t.LineIterator=t.LineOp=t.Line=t.Op=t.OpIterator=t.Delta=t.AttributeMap=t.EventDispatcher=t.diff=t.isEqual=t.intersect=t.cloneDeep=void 0;const i=r(v);t.cloneDeep=i.default;const s=r(b);t.intersect=s.default;const c=r(h);t.isEqual=c.default;const l=r(p);t.diff=l.default;const k=r(F);t.EventDispatcher=k.default;const D=r(y);t.AttributeMap=D.default;const T=r(u);t.Delta=T.default;const O=r(E);t.OpIterator=O.default;const M=r(L);t.Op=M.default,o(g,t);const S=r(m);t.Line=S.default;const R=r(_);t.LineOp=R.default;const P=r(N);t.LineIterator=P.default;const C=r(f);t.TextChange=C.default;const z=r(d);t.TextDocument=z.default,o(x,t),o(A,t),o(I,t),o(H,t),o(B,t),o(j,t),o(ee,t),o(w,t),o(te,t),o($,t),o(ne,t);const q=r(ne);t.Editor=q.default})),re=l(oe),ie=Object.freeze(Object.assign(Object.create(null),oe,{[Symbol.toStringTag]:"Module",default:re}));export{ie as i};
